from pybrain.tools.shortcuts import buildNetwork
from pybrain.datasets import SupervisedDataSet
from pybrain.supervised.trainers import BackpropTrainer
import pickle, operator, time

def activate(net, pixelString):
    input = [float(p) for p in pixelString]
    charset = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"

    output = net.activate(input)
    probsDict = {}

    for i in range(36):
        letter = charset[i]
        probs = output[i]
        probsDict[letter] = probs

    sorted_probs = sorted(probsDict.items(), key=operator.itemgetter(1))
    final = {}
    for i in range(35, -1, -1):
        l = sorted_probs[i]

        final[l[0]] = "%.3f" % l[1]

    print(final)

while True:
    f = open('brain.p','rb')
    net = pickle.load(f)

    activate(net,
             "0001110000000000000000000000000011110010000000000000000000000000110000110000000000000000000000001000000110000000000000000000000010000000110000000000000000000000100000000100000000000000000000001000000001000000000000000000000010000000010000000000000000000000100000000100000000000000000000001000000011000000000000000000000010000001100000000000000000000000100000111111000000000000000000001000000000010000000000000000000010000000000010000000000000000000100000000000100000000000000000001000000000001000000000000000000010000000000110000000000000000000100000000001000000000000000000001000000001100000000000000000000010000000110000000000000000000000111111110000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000")
    time.sleep(3)